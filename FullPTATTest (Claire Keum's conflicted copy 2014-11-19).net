* C:\Users\akeum\Dropbox\VLSI_Project\FullPTATTest.asc
XX1 0 N001 N004 Vb Vdd Vcm N007 N002 cmfbdiffamp
XX2 CLK3 0 N005 CLK2 N006 N008 N009 switched_ptat
V1 Vdd 0 5V
V2 Vcm 0 2.5v
V3 Vb 0 1.2V
I1 Vdd N005 2µA
I2 Vdd N006 34µA
V4 CLK3 0 PULSE(0V 5V 0.2ms 0.1us 0.1us .1ms .2ms 2)
V5 CLK2 0 PULSE(0V 5V .1ms 0.1us 0.1us .1ms .2ms 2)
C1 N003 N008 10p
C2 N010 N009 10p
C3 N002 N001 2p
C4 N007 N004 2p
M1 N001 CLK2 N003 0 NMOS l=1.8um w=1.8um
M2 N004 CLK3 N003 0 NMOS l=1.8um w=1.8um
M3 N010 CLK3 N001 0 NMOS l=1.8um w=1.8um
M4 N010 CLK2 N004 0 NMOS l=1.8um w=1.8um
M5 N002 CLK1 N001 0 NMOS l=1.8um w=1.8um
M6 N004 CLK1 N007 0 NMOS l=1.8um w=1.8um
V6 CLK1 0 PWL(0s 5V 0.1ms 5V 0.1001ms 0V)

* block symbol definitions
.subckt cmfbdiffamp GND V+ V- Vb Vdd Vcm_des Vout+ Vout-
M1 N001 V+ N006 GND NMOS l=1.8um w=1.8um
M2 N002 V- N006 GND NMOS l=1.8um w=1.8um
M3 N006 Vb GND NC_01 NMOS l=1.8um w=1.8um
M4 N002 N002 Vdd Vdd PMOS l=1.8um w=1.8um
M5 Vout- N002 Vdd Vdd PMOS l=1.8um w=1.8um
M6 N001 N001 Vdd Vdd PMOS l=1.8um w=1.8um
M7 Vout+ N001 Vdd Vdd PMOS l=1.8um w=1.8um
M8 Vout+ N005 GND GND NMOS l=1.8um w=1.8um
M9 Vout- N005 GND GND NMOS l=1.8um w=1.8um
M10 N004 N001 Vdd Vdd PMOS l=1.8um w=1.8um
M11 N004 N002 Vdd Vdd PMOS l=1.8um w=1.8um
M12 N005 Vcm_des N004 Vdd PMOS l=1.8um w=1.8um
M13 GND N003 N004 Vdd PMOS l=1.8um w=1.8um
M14 N005 N005 GND GND NMOS l=1.8um w=1.8um
M15 N003 N002 Vdd Vdd PMOS l=1.8um w=1.8um
M16 N003 N001 Vdd Vdd PMOS l=1.8um w=1.8um
M17 N003 N005 GND GND NMOS l=1.8um w=1.8um
M18 N003 N005 GND GND NMOS l=1.8um w=1.8um
.ends cmfbdiffamp

.subckt switched_ptat CLK GND I_in nCLK NI_in +dVbe -dVbe
Q1 GND GND +dVbe 0 PNP
Q2 GND GND -dVbe 0 PNP
M1 I_in CLK +dVbe GND NMOS l=1.8um w=1.8um
M2 I_in nCLK -dVbe GND NMOS l=1.8um w=1.8um
M3 NI_in nCLK +dVbe GND NMOS l=1.8um w=1.8um
M4 NI_in CLK -dVbe GND NMOS l=1.8um w=1.8um
.ends switched_ptat

.model NPN NPN
.model PNP PNP
.lib C:\Program Files (x86)\LTC\LTspiceIV\lib\cmp\standard.bjt
.model NMOS NMOS
.model PMOS PMOS
.lib C:\Program Files (x86)\LTC\LTspiceIV\lib\cmp\standard.mos
.tran 2ms
.inc engr3426.sub
.step temp list 0 10 20 30
.backanno
.end
